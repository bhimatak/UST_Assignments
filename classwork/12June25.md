<h1>The CPU Load Balancer</h1>  
---

   
**Domain:** System Programming / Operating Systems

**Concepts Involved:** Threading, Task Distribution, Synchronization, Dynamic Load Handling


**Problem Narrative:**

Imagine a multi-core processor environment being simulated for a real-time operating system. Each core is a worker, independently processing tasks. These tasks don’t arrive all at once — they trickle in, sometimes in bursts, sometimes slowly, much like processes arriving in an OS scheduler’s queue. Your job is to simulate this load balancer where:

* There are multiple **worker units (representing CPU cores)**.
* Tasks come into a **shared task pool** with varying sizes (execution time or complexity).
* Cores must **pick and process tasks**, and once done, move to the next.

However, the situation gets trickier:

* A core can **relinquish an unstarted task** if another core is idle for too long.
* No two cores should **pick the same task**.
* Tasks must **not be lost, repeated, or skipped**.
* Task distribution must remain as **balanced as possible**.

Think about how you'll coordinate multiple entities reading from and writing to the same task pool. How would you detect and prevent collisions? How do you track idle vs. active cores? What data needs protection, and what doesn't?

The load balancer must **never crash**, **never hang**, and **always complete all tasks** eventually — no matter how chaotic the task arrival pattern is.

---

### Summary

| Problem                            | Domain             | Core Concepts                                 |
| ---------------------------------- | ------------------ | --------------------------------------------- |
| **CPU Load Balancer**              | System Programming | Task distribution, shared queue, dynamic load |

---


---

## **CPU Load Balancer**

**Inputs:**

* Task Queue:

  ```
  Task ID | Load
  --------|-----
  T1      | 5
  T2      | 3
  T3      | 4
  T4      | 2
  T5      | 1
  ```

* Number of CPU Workers: `2`

**Expected Output:** (Order may vary due to concurrency, but each task must be processed once and only once.)

```
CPU-1 picked Task T1 (Load: 5)
CPU-2 picked Task T2 (Load: 3)
CPU-2 picked Task T4 (Load: 2)
CPU-1 picked Task T3 (Load: 4)
CPU-2 picked Task T5 (Load: 1)
All tasks completed.
```

**Verification:**

* No task should be picked twice.
* No task should be missed.
* All CPUs must work concurrently if tasks are available.

---

